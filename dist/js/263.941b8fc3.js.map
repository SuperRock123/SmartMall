{"version":3,"file":"js/263.941b8fc3.js","mappings":"gKAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,OAAO,YAAY,KAAK,aAAa,IAAIC,GAAG,CAAC,aAAa,SAASC,GAAQ,OAAOP,EAAIQ,QAAQC,IAAI,EAAE,KAAKP,EAAG,oBAAoB,CAACA,EAAG,oBAAoB,CAACG,MAAM,CAAC,QAAUL,EAAIU,SAASJ,GAAG,CAAC,OAASN,EAAIW,cAAcC,MAAM,CAACC,MAAOb,EAAIc,OAAQC,SAAS,SAAUC,GAAMhB,EAAIc,OAAOE,CAAG,EAAEC,WAAW,aAAa,GAAGf,EAAG,MAAM,CAACE,YAAY,WAAWJ,EAAIkB,GAAIlB,EAAImB,gBAAgB,SAASC,GAAM,OAAOlB,EAAG,MAAM,CAACmB,IAAID,EAAKE,WAAWlB,YAAY,UAAU,CAAwB,MAAtBgB,EAAKG,KAAKC,WAAkBtB,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,eAAeH,EAAG,MAAM,CAACG,MAAM,CAAC,IAAMe,EAAKG,KAAKC,cAActB,EAAG,OAAO,CAACF,EAAIyB,GAAGzB,EAAI0B,GAAGN,EAAKG,KAAKI,cAAczB,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQe,EAAKQ,MAAM,EAAE,KAAO,GAAG,MAAQ,UAAU,YAAY,OAAO,aAAa,OAAO,SAAW,MAAM1B,EAAG,MAAM,CAACE,YAAY,WAAW,CAACJ,EAAIyB,GAAG,IAAIzB,EAAI0B,GAAGN,EAAKS,SAAS,OAAO3B,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACJ,EAAIyB,GAAGzB,EAAI0B,GAAGN,EAAKU,iBAAiB,EAAE,IAAG,IAAI,EAClgC,EACIC,EAAkB,G,UCkCtB,GACAC,KAAA,aACAC,IAAAA,GACA,OACAC,SAAA,GACAC,iBAAA,GACAhB,eAAA,GACAL,OAAA,EACAJ,QAAA,CACA,CAAA0B,KAAA,KAAAvB,MAAA,GACA,CAAAuB,KAAA,KAAAvB,MAAA,GACA,CAAAuB,KAAA,KAAAvB,MAAA,GACA,CAAAuB,KAAA,KAAAvB,MAAA,IAGA,EACA,aAAAwB,GACA,KAAAF,uBAAAG,EAAAA,EAAAA,IAAA,KAAAC,OAAAC,MAAAC,SACA,KAAAN,iBAAA,KAAAA,iBAAAF,KAAAS,MAGA,KAAAR,eAAAS,EAAAA,EAAAA,IAAA,KAAAJ,OAAAC,MAAAC,QAAA,KAAAN,iBAAAS,KACA,KAAAV,SAAA,KAAAA,SAAAD,KAAAY,KAGA,KAAA1B,eAAA,KAAAe,SAAAY,MAAA,CAAAC,EAAAC,IAAA,KAAAC,UAAAD,GAAA,KAAAC,UAAAF,IACA,EACAG,QAAA,CACAvC,YAAAA,GAEA,EAEAsC,SAAAA,CAAAE,GAIA,WAAAC,KAAAD,EACA,ICzE6P,I,UCQzPE,GAAY,OACd,EACAtD,EACAgC,GACA,EACA,KACA,WACA,MAIF,EAAesB,EAAiB,O,sHClBzB,SAASC,EAAkBb,GAChC,OAAOc,EAAAA,EAAQC,IAAI,gBAAiB,CAClCC,OAAQ,CACNhB,YAGN,CACO,SAASH,EAAmBG,GACjC,OAAOc,EAAAA,EAAQC,IAAI,iBAAkB,CACnCC,OAAQ,CACNhB,YAGN,CACO,SAASE,EAAiBF,EAASiB,GACxC,OAAOH,EAAAA,EAAQC,IAAI,oBAAqB,CACtCC,OAAQ,CACNhB,UACAiB,UAGN,C","sources":["webpack://smart-mall/./src/views/reviewPage/index.vue","webpack://smart-mall/src/views/reviewPage/index.vue","webpack://smart-mall/./src/views/reviewPage/index.vue?106f","webpack://smart-mall/./src/views/reviewPage/index.vue?84ce","webpack://smart-mall/./src/api/productDetail.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"reviewPage\"},[_c('van-nav-bar',{attrs:{\"title\":\"评论详情\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),_c('van-dropdown-menu',[_c('van-dropdown-item',{attrs:{\"options\":_vm.option1},on:{\"change\":_vm.handleChange},model:{value:(_vm.value1),callback:function ($$v) {_vm.value1=$$v},expression:\"value1\"}})],1),_c('div',{staticClass:\"comment\"},_vm._l((_vm.sortedComments),function(item){return _c('div',{key:item.comment_id,staticClass:\"review\"},[(item.user.avatar_url==null)?_c('van-icon',{attrs:{\"name\":\"contact-o\"}}):_c('img',{attrs:{\"src\":item.user.avatar_url}}),_c('span',[_vm._v(_vm._s(item.user.nick_name))]),_c('van-rate',{attrs:{\"value\":item.score/2,\"size\":16,\"color\":\"#ffd21e\",\"void-icon\":\"star\",\"void-color\":\"#eee\",\"readonly\":\"\"}}),_c('div',{staticClass:\"content\"},[_vm._v(\" \"+_vm._s(item.content)+\" \")]),_c('div',{staticClass:\"time\"},[_vm._v(_vm._s(item.create_time))])],1)}),0)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"reviewPage\">\r\n    <van-nav-bar\r\n    title=\"评论详情\"\r\n    left-text=\"返回\"\r\n    left-arrow\r\n    @click-left=\"$router.go(-1)\"\r\n    />\r\n    <van-dropdown-menu>\r\n    <van-dropdown-item v-model=\"value1\" :options=\"option1\" @change=\"handleChange\" />\r\n    </van-dropdown-menu>\r\n    <div class=\"comment\">\r\n      <div class=\"review\" v-for=\"item in sortedComments\" :key=\"item.comment_id\">\r\n        <!-- <img src=\"\" alt=\"\"> -->\r\n        <van-icon v-if=\"item.user.avatar_url==null\" name=\"contact-o\"/>\r\n        <img v-else :src=\"item.user.avatar_url\" />\r\n        <span>{{item.user.nick_name}}</span>\r\n        <van-rate\r\n          :value=\"item.score/2\"\r\n          :size=\"16\"\r\n          color=\"#ffd21e\"\r\n          void-icon=\"star\"\r\n          void-color=\"#eee\"\r\n          readonly\r\n        />\r\n        <div class=\"content\">\r\n         {{item.content}}\r\n        </div>\r\n        <div class=\"time\">{{item.create_time}}</div>\r\n       </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getCommentsNumber, getAllCommments } from '@/api/productDetail'\r\nexport default {\r\n  name: 'reviewPage',\r\n  data () {\r\n    return {\r\n      comments: {},\r\n      commentsOverview: {},\r\n      sortedComments: {},\r\n      value1: 0,\r\n      option1: [\r\n        { text: '最新', value: 0 },\r\n        { text: '有图', value: 1 },\r\n        { text: '好评', value: 2 },\r\n        { text: '差评', value: 3 }\r\n      ]\r\n    }\r\n  },\r\n  async created () {\r\n    this.commentsOverview = await getCommentsNumber(this.$route.query.goodsId)\r\n    this.commentsOverview = this.commentsOverview.data.total\r\n    // console.log('Overview:', this.commentsOverview)\r\n\r\n    this.comments = await getAllCommments(this.$route.query.goodsId, this.commentsOverview.all)\r\n    this.comments = this.comments.data.list\r\n    // console.log('comments:', this.comments)\r\n\r\n    this.sortedComments = this.comments.sort((a, b) => this.parseDate(b) - this.parseDate(a))\r\n  },\r\n  methods: {\r\n    handleChange () {\r\n      // console.log(this.value1)\r\n    //   if(this.value1==1)\r\n    },\r\n    parseDate (date) {\r\n    //   const YMD = date.split(' ')\r\n    //   const [year, month, day] = YMD[0].split('-')\r\n    //   return new Date(year, month, day)\r\n      return new Date(date)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.comment .review{\r\n  /* border: 1px solid black; */\r\n  padding: 10px;\r\n}\r\n.comment .review span:first-child{\r\n  margin: 0 10px;\r\n  background-color: #d63131;\r\n}\r\n.comment .review .time{\r\n  color: #ccc;\r\n  font-size: 15px;\r\n  text-align: right;\r\n}\r\n.comment .review img{\r\n  width: 20px\r\n}\r\n.comment .review .content{\r\n    max-height: 60px;\r\n    overflow: scroll;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=e5784700&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=e5784700&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e5784700\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\nexport function getProductDetail (goodsId) {\r\n  return request.get('/goods/detail', {\r\n    params: {\r\n      goodsId\r\n    }\r\n  })\r\n}\r\nexport function getCommentsNumber (goodsId) {\r\n  return request.get('/comment/total', {\r\n    params: {\r\n      goodsId\r\n    }\r\n  })\r\n}\r\nexport function getAllCommments (goodsId, limit) {\r\n  return request.get('/comment/listRows', {\r\n    params: {\r\n      goodsId,\r\n      limit\r\n    }\r\n  })\r\n}\r\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","go","option1","handleChange","model","value","value1","callback","$$v","expression","_l","sortedComments","item","key","comment_id","user","avatar_url","_v","_s","nick_name","score","content","create_time","staticRenderFns","name","data","comments","commentsOverview","text","created","getCommentsNumber","$route","query","goodsId","total","getAllCommments","all","list","sort","a","b","parseDate","methods","date","Date","component","getProductDetail","request","get","params","limit"],"sourceRoot":""}