{"version":3,"file":"js/880.0764aba4.js","mappings":"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","sources":["webpack://smart-mall/./src/views/login/index.vue","webpack://smart-mall/src/views/login/index.vue","webpack://smart-mall/./src/views/login/index.vue?ff45","webpack://smart-mall/./src/views/login/index.vue?a173"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login-container\"},[_c('van-nav-bar',{attrs:{\"title\":\"用户登录\",\"left-text\":\"返回\",\"left-arrow\":\"\",\"right-text\":\"主页\"},on:{\"click-left\":_vm.onClickLeft,\"click-right\":_vm.onClickRight}}),_vm._m(0),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"inputbox\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.phoneNumber),expression:\"phoneNumber\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入手机号码\"},domProps:{\"value\":(_vm.phoneNumber)},on:{\"input\":function($event){if($event.target.composing)return;_vm.phoneNumber=$event.target.value}}})]),_c('div',{staticClass:\"inputbox\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputPicCode),expression:\"inputPicCode\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入图形验证码\"},domProps:{\"value\":(_vm.inputPicCode)},on:{\"input\":function($event){if($event.target.composing)return;_vm.inputPicCode=$event.target.value}}}),(_vm.picUrl)?_c('img',{attrs:{\"src\":_vm.picUrl,\"title\":\"点击切换图片\"},on:{\"click\":_vm.getPic}}):_vm._e()]),_c('div',{staticClass:\"inputbox\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.msgCode),expression:\"msgCode\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入短信验证码\"},domProps:{\"value\":(_vm.msgCode)},on:{\"input\":function($event){if($event.target.composing)return;_vm.msgCode=$event.target.value}}}),_c('div',{staticClass:\"send\",on:{\"click\":_vm.sendMsg}},[_vm._v(\"发送验证码\"+_vm._s(_vm.timer.id===null?'':_vm.timer.second))])])]),_c('van-button',{staticClass:\"login\",attrs:{\"type\":\"primary\",\"block\":true,\"width\":\"100px\"},on:{\"click\":_vm.login}},[_vm._v(\"登录\")])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"top\"},[_c('h3',[_vm._v(\"手机号登录\")]),_c('p',[_vm._v(\"未注册的手机号登录后自动注册\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"login-container\">\r\n    <van-nav-bar\r\n      title=\"用户登录\"\r\n      left-text=\"返回\"\r\n      left-arrow\r\n      @click-left=\"onClickLeft\"\r\n      right-text=\"主页\"\r\n      @click-right=\"onClickRight\"\r\n    />\r\n    <div class=\"top\">\r\n        <h3>手机号登录</h3>\r\n      <p>未注册的手机号登录后自动注册</p>\r\n    </div>\r\n    <div class=\"content\">\r\n      <div class=\"inputbox\">\r\n        <input type=\"text\" placeholder=\"请输入手机号码\" v-model=\"phoneNumber\">\r\n      </div>\r\n      <div class=\"inputbox\">\r\n        <input type=\"text\" placeholder=\"请输入图形验证码\" v-model=\"inputPicCode\">\r\n        <img :src=\"picUrl\" title=\"点击切换图片\" @click=\"getPic\" v-if=\"picUrl\">\r\n      </div>\r\n      <div class=\"inputbox\">\r\n        <input type=\"text\" placeholder=\"请输入短信验证码\" v-model=\"msgCode\">\r\n        <div class=\"send\" @click=\"sendMsg\">发送验证码{{timer.id===null?'':timer.second}}</div>\r\n      </div>\r\n    </div>\r\n    <van-button type=\"primary\" class=\"login\" :block=\"true\" width=\"100px\" @click=\"login\">登录</van-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getPic, getMsg, login } from '@/api/login.js'\r\nimport { Toast, Notify } from 'vant'\r\nexport default {\r\n  name: 'LoginIndex',\r\n  data () {\r\n    return {\r\n      picUrl: '',\r\n      picCode: '',\r\n      inputPicCode: '',\r\n      phoneNumber: '',\r\n      msgCode: '',\r\n      timer: {\r\n        id: null,\r\n        maxSecond: 60,\r\n        second: 60\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getPic()\r\n  },\r\n  destroyed () {\r\n    clearInterval(this.timer.id)\r\n  },\r\n  methods: {\r\n    onClickLeft () {\r\n      // console.log('clicked navbar left')\r\n      this.$router.go(-1)\r\n    },\r\n    onClickRight () {\r\n      // console.log('clicked navbar right')\r\n      this.$router.push('/home')\r\n    },\r\n    async getPic () {\r\n      const { data: { base64, key }, status } = await getPic()\r\n      this.picUrl = base64\r\n      this.picCode = key\r\n      if (status === 200) {\r\n        Toast({\r\n          message: '刷新成功'\r\n        })\r\n      }\r\n      // console.log(this.picUrl + '   ' + this.picCode)\r\n    },\r\n    async sendMsg () {\r\n      if (this.validateBeforeSendMsg() === false) {\r\n        return\r\n      }\r\n      if (this.timer.id === null) {\r\n        const res = await getMsg(this.inputPicCode, this.picCode, this.phoneNumber)\r\n        // console.log(res)\r\n        if (res.status === 200) {\r\n          Toast.success({\r\n            message: '发送成功'\r\n          })\r\n          Notify({\r\n            message: `你的验证码为:${res.message}`,\r\n            type: 'success',\r\n            duration: 4000\r\n          })\r\n        } else {\r\n          Toast.fail({\r\n            message: '发送失败'\r\n          })\r\n          return\r\n        }\r\n        this.timer.id =\r\n          setInterval(() => {\r\n            this.timer.second--\r\n            // console.log(this.timer.id)\r\n            if (this.timer.second === 0) {\r\n              clearInterval(this.timer.id)\r\n              this.timer.id = null\r\n              this.timer.second = this.timer.maxSecond\r\n            }\r\n          }, 1000)\r\n      }\r\n    },\r\n    validateBeforeSendMsg () {\r\n      if (this.phoneNumber === '' || this.phoneNumber.length !== 11) {\r\n        Toast.fail({\r\n          message: '手机号不正确'\r\n        })\r\n        return false\r\n      }\r\n      if (this.inputPicCode === '' || this.inputPicCode.length !== 4) {\r\n        Toast.fail({\r\n          message: '验证码不正确'\r\n        })\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    async login () {\r\n      if (this.phoneNumber === '' || this.phoneNumber.length !== 11) {\r\n        Toast.fail({\r\n          message: '手机号不正确'\r\n        })\r\n        return false\r\n      }\r\n      if (this.inputPicCode === '' || this.inputPicCode.length !== 4) {\r\n        Toast.fail({\r\n          message: '验证码不正确'\r\n        })\r\n        return false\r\n      }\r\n      if (this.msgCode === '') {\r\n        Toast.fail({\r\n          message: '验证码不正确'\r\n        })\r\n        return false\r\n      }\r\n      const res = await login(this.phoneNumber, this.msgCode)\r\n      if (res.status === 200) {\r\n        Toast.success({\r\n          message: '登录成功'\r\n        })\r\n        this.$store.commit('user/setUserInfo', res.data)\r\n        // console.log(this.$store.state.user.userInfo)\r\n        if (this.$route.query.goodsId === undefined) {\r\n          this.$router.push('/home')\r\n        } else {\r\n          this.$router.replace(`/product?goodsId=${this.$route.query.goodsId}`)\r\n        }\r\n      } else {\r\n        Toast.fail({\r\n          message: '登录失败'\r\n        })\r\n      }\r\n      return true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .top{\r\n    /* background-color: #dfa3a3; */\r\n    width: 90%;\r\n    margin: 5px auto;\r\n  }\r\n  .top h3{\r\n    margin: 0;\r\n  }\r\n  .top p{\r\n    color: #ccc;\r\n    margin: 0;\r\n  }\r\n  .content{\r\n    /* background-color: #a7d390; */\r\n    width: 90%;\r\n    margin: 10px auto;\r\n  }\r\n  .content .inputbox{\r\n    /* border: 1px solid black; */\r\n    height: 60px;\r\n    padding: 10px;\r\n    position: relative;\r\n    border-bottom: 1px solid #ccc;\r\n  }\r\n  .content .inputbox input{\r\n    width: 70%;\r\n    border: none;\r\n    height: 50px;\r\n    font-size: 20px;\r\n  }\r\n  .content .inputbox img{\r\n    /* border: 1px solid black; */\r\n    position: absolute;\r\n    width: 30%;\r\n    height: 50px;\r\n    right: 5px;\r\n  }\r\n  .content .inputbox .send{\r\n    /* border: 1px solid black; */\r\n    position: absolute;\r\n    width: 30%;\r\n    height: 50px;\r\n    right: 0px;\r\n    top: 5px;\r\n    text-align: center;\r\n    font-size: 14px;\r\n    color: rgb(97, 168, 219);\r\n    line-height: 50px;\r\n    font-weight: bold;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=c10e0e0c\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=c10e0e0c&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","onClickLeft","onClickRight","_m","directives","name","rawName","value","phoneNumber","expression","domProps","$event","target","composing","inputPicCode","picUrl","getPic","_e","msgCode","sendMsg","_v","_s","timer","id","second","login","staticRenderFns","data","picCode","maxSecond","created","destroyed","clearInterval","methods","$router","go","push","base64","key","status","Toast","message","validateBeforeSendMsg","res","getMsg","fail","success","Notify","type","duration","setInterval","length","$store","commit","undefined","$route","query","goodsId","replace","component"],"sourceRoot":""}