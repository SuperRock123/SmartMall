"use strict";(self["webpackChunksmart_mall"]=self["webpackChunksmart_mall"]||[]).push([[169],{7169:function(t,e,s){s.r(e),s.d(e,{default:function(){return f}});s(4114);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[e("van-nav-bar",{attrs:{title:"搜索","left-text":"主页","left-arrow":""},on:{"click-left":function(e){return t.$router.push("/home")}}}),e("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词",shape:"round",autofocus:!0},on:{search:t.handleSearch},scopedSlots:t._u([{key:"action",fn:function(){return[e("van-button",{attrs:{type:"info"},on:{click:t.handleSearch}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}}),e("div",{staticClass:"history"},[e("span",[t._v("历史")]),e("van-icon",{attrs:{name:"delete-o"},on:{click:t.deleteHistory}})],1),e("div",{staticClass:"list"},t._l(t.searchHistory,(function(s){return e("div",{key:s,staticClass:"list-item",on:{click:function(e){return t.handleSearchClick(s)}}},[t._v(t._s(s))])})),0)],1)},a=[];const i="search_history";var c={setStorage:function(t){localStorage.setItem(i,JSON.stringify(t))},getStorage:function(){const t=JSON.parse(localStorage.getItem(i));return t||[]},removeStorage:function(){localStorage.removeItem(i)}},n=s(8393),o={name:"SearchIndex",data(){return{searchHistory:c.getStorage(),searchInput:""}},methods:{handleSearch(){if(""===this.searchInput)return void n.A.fail({message:"请输入关键字"});const t=this.searchHistory.indexOf(this.searchInput);if(-1===t)this.searchHistory.unshift(this.searchInput);else{const e=this.searchHistory[t];this.searchHistory.splice(t,1),this.searchHistory.unshift(e)}c.setStorage(this.searchHistory),this.$router.push({path:`/searchList?search=${this.searchInput}`})},deleteHistory(){c.removeStorage(),this.searchHistory=[]},handleSearchClick(t){const e=this.searchHistory.indexOf(t);this.searchHistory.splice(e,1),this.searchHistory.unshift(t),c.setStorage(this.searchHistory),this.$router.push({path:"/searchList",query:{search:t}})}}},h=o,l=s(1656),u=(0,l.A)(h,r,a,!1,null,"ac7b8222",null),f=u.exports}}]);
//# sourceMappingURL=169.7872f72f.js.map